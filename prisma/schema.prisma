generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id        String      @id @default(cuid())
  fullName  String
  email     String      @unique
  phone     String?
  skills    String?     // can store as comma-separated list or JSON string
  experience String?    // simple text; can also be JSON if structured

  cvUploads CVUpload[]  // relation to uploaded CVs

  createdAt DateTime    @default(now())
  updatedAt DateTime    @updatedAt
}

model CVUpload {
  id              String   @id @default(cuid())
  user            User     @relation(fields: [userId], references: [id])
  userId          String

  filePath        String   // where the PDF is stored (local path or S3 URL)
  validationStatus ValidationStatus @default(PENDING)
  mismatchedFields Json?    // store which fields didnâ€™t match

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

enum ValidationStatus {
  PENDING
  SUCCESS
  FAILURE
}